import e,{useRef as t,useEffect as n,useCallback as r,useState as a,useMemo as i}from"react";var l=function(t){var n=t.label,r=t.value,a=t.onChange,i=t.onToggle,l=t.toggleValue,o=t.id,c=t.toggleId;return e.createElement("div",{className:"inputContainer3Wide"},e.createElement("label",{className:"attributeLabel"},e.createElement("span",{style:{margin:"auto"}},n||o)),e.createElement("label",{className:"switch"},e.createElement("input",{type:"checkbox",checked:l,onChange:i,id:c}),e.createElement("span",{className:"switchspan round"})),e.createElement("input",{id:o,disabled:!l,type:"color",value:r,onChange:a,className:"attributeInput"}))},o=function(n){var r=n.id,a=n.label,i=n.value,l=n.onChange,o=n.min,c=n.max,u=n.step;return t(i),e.createElement("div",{className:"inputContainer2Wide"},e.createElement("label",{className:"attributeLabel"},e.createElement("span",{style:{margin:"auto"}},a||r)),e.createElement("label",{className:"attributeLabel"},e.createElement("span",{style:{margin:"auto"}},i)),e.createElement("input",{id:r,className:"sliderInput",type:"range",min:o||0,max:c||100,step:u||1,value:i||0,onChange:l}))},c=function(t){var n=t.id,r=t.label,a=t.value,i=t.items,l=t.onChange;return e.createElement("div",{className:"inputContainer2Wide"},e.createElement("label",{className:"attributeLabel"},e.createElement("span",{style:{margin:"auto"}},r||n)),e.createElement("select",{id:n,value:a,onChange:l,className:"attributeInput"},i.map((function(t){return e.createElement("option",{value:t,key:t},t)}))))},u=function(){return u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},u.apply(this,arguments)};function s(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}('.attributeLabel {\n  width: 100%;\n  height: 38px;\n  padding: 5px;\n  display: grid;\n  grid-template-columns: auto;\n  background: black;\n  margin: auto;\n  color: white;\n  border-radius: 5px;\n}\n\n.attributeInput {\n  width: 95%;\n  margin: auto;\n  height: 50px;\n  user-select: auto;\n  border-radius: 5px;\n  /* box-shadow: 1px 1px 1px 1px #000; */\n}\n\n.inputContainer2Wide {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-gap: 5px;\n}\n\n.inputContainer3Wide {\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr auto;\n}\n\n/* SwitchInput */\n.switch {\n  position: relative;\n  display: inline-block;\n  width: 60px;\n  height: 34px;\n  margin: auto;\n}\n\n.switch input {\n  opacity: 0;\n  width: 0;\n  height: 0;\n}\n\n.switchspan {\n  position: absolute;\n  cursor: pointer;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: #ccc;\n  -webkit-transition: 0.4s;\n  transition: 0.4s;\n}\n\n.switchspan:before {\n  position: absolute;\n  content: "";\n  height: 26px;\n  width: 26px;\n  left: 4px;\n  bottom: 4px;\n  background-color: white;\n  -webkit-transition: 0.4s;\n  transition: 0.4s;\n}\n\n.round {\n  border-radius: 34px;\n}\n\n.round:before {\n  border-radius: 50%;\n}\n\ninput:checked + .switchspan {\n  background-color: #2196f3;\n}\n\ninput:focus + .switchspan {\n  box-shadow: 0 0 1px #2196f3;\n}\n\ninput:checked + .switchspan:before {\n  -webkit-transform: translateX(26px);\n  -ms-transform: translateX(26px);\n  transform: translateX(26px);\n}');var d,h=function(t){var n=t.round,r=void 0===n||n,a=t.color,i=void 0===a?"#2196f3":a,l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(t,["round","color"]),o=l.id,c=l.label,u=l.value,s=l.onChange,d={backgroundColor:i};return e.createElement("div",{className:"inputContainer2Wide"},c?e.createElement("label",{className:"attributeLabel"},e.createElement("span",{style:{margin:"auto"}},c||o)):null,e.createElement("label",{className:"switch"},e.createElement("input",{type:"checkbox",checked:u,onChange:s,id:o}),e.createElement("span",{className:"switchspan ".concat(r?"round":""),style:d})))},m=function(t){var n=t.id,r=t.label,a=t.value,i=t.onChange;return e.createElement("div",{className:"inputContainer2Wide"},e.createElement("label",{className:"attributeLabel"},e.createElement("span",{style:{margin:"auto"}},r)),e.createElement("input",{id:n,type:"text",value:a,onChange:i,className:"attributeInput"}))},g=function(e){var t=e.relatives,n=e.box,r=t.r_x,a=t.r_y,i=t.r_width,l=t.r_height,o=n.width,c=n.height;n.x,n.y;var u=i*o,s=l*c;return{x:r*o,y:a*c,width:u,height:s,offsetX:u/2,offsetY:s/2}},f=function(e){var t=e.focalPoint,n=e.x,r=e.y,a=e.width,i=e.height,l=e.movementFactor,o=e.outerSize,c=e.sensitivity,u=o*l,s=(t.x-n)/a*c*u,d=(t.y-r)/i*c*u;return{x:s>u?u:s<-u?-u:s,y:d>u?u:d<-u?-u:d}},p=function(e){var t=e.ratio,n=e.sum;return[t*n/(t+1),n/(t+1)]},b=function(e){return e&&"current"in e?e.current:e},y=function(e){return e&&e.current?e.current.getStage():null},v=!("undefined"!=typeof window&&(null===(d=window.document)||void 0===d?void 0:d.createElement)),x=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n].length;return t},k=function(e){for(var t=e.split(" "),n=[],r=0;r<t.length;r++){var a=t[r];a.length>0&&n.push(a)}return n},S=function(e){var t=e.parameters,n=e.size,r=e.canvasRef;if(!r||null===r.current)return null;var a=n.width,i=n.height;if(!a||!i)return null;var l=t.fontSize,o=t.maxHeight,c=t.maxWidth,u=t.text,s=t.fontFamily,d=t.fontStyle,h=r.current.getContext(),m=l+(o-l)/2,g=d?d+" "+m+"px "+s:m+"px "+s;h.font=g;var f=h.measureText(u),p=f.width;return o-l<1&&p<c?(t.fontSize=Math.floor(l-.5),t.textmetrics=f,t):p>=c?(t.maxHeight=m,S({parameters:t,size:n,canvasRef:r})):p<c?(t.fontSize=m,S({parameters:t,size:n,canvasRef:r})):void 0},E=function(e){var t=e.parameters,n=e.size,r=e.canvasRef;if(t.strokeWidthFactor,!r||null===r.current)return null;for(var a=t.textContent,i=t.maxHeight,l=n.width,o=n.height,c=k(a),s=t.minrows||1,d=t.maxrows||c.length,h=null,m=0,g=function(e){var c=function(e,t){for(var n=k(e),r=x(e)/t,a=[],i=[],l=[],o=0;o<n.length;o++){var c=n.slice(o),u=c[0],s=!1;if(c.length>=2){s=c[1],i.push(u),l=i.concat(s);var d=x(i),h=x(l);(d>r||h>r&&r-d<h-r)&&(a.push(i),i=[])}else i.push(u),a.push(i)}return a}(a,e),s=c.map((function(a){var l=a.join(" ");return S({parameters:u(u({},t),{maxHeight:i/e,text:l}),size:n,canvasRef:r})})),d=Math.min.apply(Math,s.map((function(e){if(e)return e.fontSize})));if(d>m){var g=(m=d)*s.length,f=(o-g)/2;h=s.map((function(e,t){return u(u({},e),{fontSize:d,minFontSize:d,maxFontSize:e.fontSize,width:l,y:f+t*m})}))}},f=s;f<=d;f++)g(f);return h},w=function(e){var t=e.box,n=e.content,r=e.canvasRef;if(!r||null===r.current)return null;var a=t.width,i=t.height,l=n.text;n.fontFamily;var o=n.fontStyle;return n.verticalAlign,E({parameters:u(u({},n),{fontSize:0,text:l||"",maxHeight:i||0,maxWidth:a||0,fontStyle:o}),size:t,canvasRef:r})},C=function(e){var a=e.type,i=e.listener,l=e.element,o=void 0===l?v?void 0:window:l,c=e.options,u=t();n((function(){u.current=i}),[i]);var s=r((function(e){var t;null===(t=u.current)||void 0===t||t.call(u,e)}),[]);n((function(){var e=b(o);return null==e||e.addEventListener(a,s,c),function(){return null==e?void 0:e.removeEventListener(a,s)}}),[a,o,c,s])},_=function(){var e=a({width:0,height:0,windowReady:!1}),t=e[0],r=e[1],i=function(){r({width:window.innerWidth,height:window.innerHeight,windowReady:!v})};return C({type:"resize",listener:i}),n((function(){i()}),[]),t},F=require("react-konva"),W=F.Stage,T=F.Layer,R=function(t){return e.createElement(W,{width:t.width,height:t.height},e.createElement(T,{ref:t.canvasRef},t.children))},I=require("@react-spring/konva"),D=I.animated,O=I.useSpring;require("react-konva").Rect;var z=function(t){var n=t.handleClick,r=t.draggable,a=t.x,i=t.y,l=t.width,o=t.height,c=t.fill,s=t.stroke,d=t.strokeWidth,h=t.rotation,m=t.offsetX,g=t.offsetY,f=t.fillEnabled,p=t.strokeEnabled,b=O({x:a,y:i,width:l,height:o,fill:c,stroke:s,strokeWidth:d,rotation:h,offsetX:m,offsetY:g}),y=O({x:a,y:i,immediate:t.immediateXY||!1});return e.createElement(D.Rect,u({id:t.id,box:t.box},b,y,{fillEnabled:f,strokeEnabled:p,draggable:r,onClick:n,onDragStart:t.handleDrag,onDragEnd:t.handleDrag,listening:t.listening}))},X=require("@react-spring/konva"),Y=X.animated,N=X.useSpring;require("react-konva").Circle;var L=function(t){var n=t.x,r=t.y,a=t.radius,i=t.fill,l=t.stroke,o=t.fillEnabled,c=t.strokeEnabled,s=t.strokeWidth,d=N({radius:a,fill:i,stroke:l,strokeWidth:s}),h=N({x:n,y:r,immediate:t.immediateXY||!1});return e.createElement(Y.Circle,u({},d,h,{id:t.id,box:t.box,draggable:t.draggable,fillEnabled:o,strokeEnabled:c,onClick:t.handleClick,onDragStart:t.handleDrag,onDragEnd:t.handleDrag,listening:t.listening}))},B=require("@react-spring/konva"),A=B.animated,q=B.useSpring,M=require("react-konva").Group,j=function(t){var n=t.x,r=t.y;t.width,t.height;var a=t.outerSize,i=t.outerShape,l=t.outerFill,o=t.outerStroke,c=t.outerRotation,s=t.innerSize,d=t.innerShape,h=t.innerFill,m=t.innerStroke,g=t.innerRotation,f=t.disableClip,b=t.w2h,y=t.innerXY,v=t.innerFillEnabled,x=t.innerStrokeEnabled,k=t.outerFillEnabled,S=t.outerStrokeEnabled,E=t.innerStrokeWidth,w=t.outerStrokeWidth,C=t.draggable,_=p({ratio:b||1,sum:2}),F={offsetX:0,offsetY:0,clipFunc:f?null:"Circle"===i?function(e){return e.arc(0,0,a,0,2*Math.PI)}:"Rect"===i?function(e){return e.rect(-a,-a,2*a,2*a)}:null,id:t.id,box:t.box},W=q({scaleX:_[0],scaleY:_[1],rotation:c||0,x:n,y:r,immediate:["x","y"]}),T={x:0,y:0,fill:l,fillEnabled:k,id:t.id,box:t.box},R={x:0,y:0,stroke:o,strokeEnabled:S,strokeWidth:w,id:t.id,box:t.box},I={x:y.x||0,y:y.y||0,fill:h,stroke:m,fillEnabled:v,strokeEnabled:x,strokeWidth:E,immediateXY:!1,dragable:!1,rotation:g||0,id:t.id,box:t.box},D="Circle"===i?e.createElement(L,u({},T,{radius:a})):"Rect"===i?e.createElement(z,u({},T,{width:2*a,height:2*a,offsetX:a,offsetY:a})):null,O="Circle"===i?e.createElement(L,u({},R,{radius:a})):"Rect"===i?e.createElement(z,u({},R,{width:2*a,height:2*a,offsetX:a,offsetY:a})):null,X="Circle"===d?e.createElement(L,u({},I,{radius:s})):"Rect"===d?e.createElement(z,u({},I,{width:2*s,height:2*s,offsetX:s,offsetY:s})):null;return e.createElement(A.Group,u({id:t.id},W,{onDragStart:t.handleDrag,onDragEnd:t.handleDrag,onClick:t.handleClick,draggable:C,listening:!0,box:t.box}),e.createElement(M,u({},F),D,X),S?O:null)},P=require("@react-spring/konva"),H=P.animated,G=P.useSpring,U=require("use-image");require("react-konva").Image;var V=function(t){var n=U(t.src),r=n[0];n[1];var a=t.x,i=t.y,l=t.width,o=t.height,c=t.rotation,s=t.offsetX,d=t.offsetY,h=G({x:a,y:i,width:l,height:o,rotation:c,offsetX:s,offsetY:d,immediate:["x","y"]}),m={fill:t.fill&&t.fillEnabled?t.fill:null,stroke:t.stroke&&t.strokeEnabled?t.stroke:null,strokeWidth:t.strokeWidth&&t.strokeEnabled?t.strokeWidth:null};return e.createElement(H.Image,u({id:t.id,box:t.box},h,m,{onClick:null==t?void 0:t.handleClick,draggable:null==t?void 0:t.draggable,canvasRef:null==t?void 0:t.canvasRef,image:r,onDragStart:t.handleDrag,onDragEnd:t.handleDrag}))},K=require("@react-spring/konva"),J=K.animated,Q=K.useSprings,Z=K.useSpring,$=require("react-konva");$.Group,$.Text;var ee=function(t){var n=t.x,r=t.y,a=t.width,l=t.height,o=t.offsetX,c=t.offsetY,s=t.rotation,d=t.strokeWidthFactor,h=t.fill,m=t.stroke,g=t.fontFamily,f=t.handleClick,p=t.handleDrag,b=t.id,y=t.box,v=t.canvasRef,x=t.fontStyle,k=t.draggable;t.immediateXY,t.listening;var S=t.fillEnabled,E=t.strokeEnabled;t.textBoxFillEnabled,t.textBoxStrokeEnabled;var C=t.textContent,_=t.align||"center",F=i((function(){var e=w({box:{width:a||0,height:l||0},content:t,canvasRef:v});return console.log(e),e||[]}),[C,a,l,g,x]),W=Q(F.length,(function(e){var t=F[e],n=t.fontSize;return{text:t.text,fontSize:n,strokeWidth:n*(d||0),y:t.y,width:t.width,fill:h,stroke:m,fontFamily:g,fontStyle:x,align:_,hitStrokeWidth:n,immediate:!0}}),[F,d,h,m,_])[0].map((function(t,n){return e.createElement(J.Text,u({key:"txt-"+n},t,{id:b,draggable:!1,fillEnabled:S,strokeEnabled:E,shadowForStrokeEnabled:!1,onClick:f}))})),T=Z({x:n,y:r,width:a,height:l,offsetX:o,offsetY:c,rotation:s,immediate:["x","y","offsetX","offsetY","width","height"]});return e.createElement(J.Group,u({},T,{id:b,box:y,onClick:f,onDragStart:p,onDragEnd:p,draggable:k,listening:!0}),W)};function te(e,r){var a=t(e);n((function(){a.current=e}),[e]),n((function(){if(r||0===r){var e=setInterval((function(){return a.current()}),r);return function(){return clearInterval(e)}}}),[r])}var ne=function(e){var t=e.canvasRef,n=e.delay,r=a({x:0,y:0});r[0],r[1];var i=a(0),l=i[0],o=i[1],c=a(0),u=c[0],s=c[1];return te((function(){var e=y(t);if(!e)return null;var n=e.getPointerPosition();return n?n.x===l&&n.y===u?null:(n.x!==l&&o(n.x),void(n.y!==u&&s(n.y))):null}),n||200),{x:l,y:u}},re=function(e){var t=e.r_outerSize,n=e.r_outer2inner,r=e.r_x,a=e.r_y,i=e.r_outerStrokeWidth,l=e.r_innerStrokeWidth,o=e.absolutes,c=o.width,s=o.height,d=r*c,h=a*s,m=t*(c+s)/2,g=m*(i||0),f=m-g/2,p=m*n,b=p*(l||0),y=p-b/2;return u(u(u({},e),o),{outerSize:f,innerSize:y,innerStrokeWidth:b,outerStrokeWidth:g,x:d,y:h,box:o})},ae=function(e){var t=e.r_x,n=e.r_y,r=e.r_width,a=e.r_height,i=e.r_strokeWidth,l=e.absolutes,o=l.width,c=l.height,s=t*o,d=n*c,h=r*o,m=a*c,g=i*Math.min(h,m)/2,f=h-g,p=m-g,b={x:s,y:d,width:f,height:p,offsetX:f/2,offsetY:p/2,strokeWidth:g,box:l};return u(u({},e),b)},ie=function(e){var t=e.r_x,n=e.r_y,r=e.r_width,a=e.r_height,i=e.r_strokeWidth,l=e.absolutes,o=l.width,c=l.height,s=t*o,d=n*c,h=r*o,m=a*c,g=i*Math.min(h,m)/2,f=h-g,p=m-g,b={x:s,y:d,width:f,height:p,offsetX:f/2,offsetY:p/2,strokeWidth:g,box:l};return u(u({},e),b)},le=function(e){var t=e.r_x,n=e.r_y,r=e.r_width,a=e.r_height,i=e.absolutes,l=i.width,o=i.height,c=r*l,s=a*o,d={x:t*l,y:n*o,width:c,height:s,offsetX:c/2,offsetY:s/2,box:i};return u(u({},e),d)},oe=require("react-konva").Group,ce=function(t){var n=t.contentObject,r=t.contentIDs,a=t.box,i=t.canvasRef,l=t.handleClick,o=t.handleDrag;t.id;var c=ne({canvasRef:i}),s=a.width,d=a.height,h=Math.min(s,d),m=a.x||0,g=a.y||0,p={width:h,height:h},b={x:(s-h)/2+m,y:(d-h)/2+g},y=r.map((function(t){var r=null==t?void 0:t.split("_")[0],a=n[t];switch(r){case"eye":var s=re(u(u({},a),{absolutes:p})),d=f(u(u({},s),{focalPoint:{x:c.x-b.x,y:c.y-b.y}}));return e.createElement(j,u({key:t,id:t},s,{innerXY:d,handleDrag:o,handleClick:l}));case"rect":var h=ae(u(u({},a),{absolutes:p}));return e.createElement(z,u({key:t,id:t},h,{handleDrag:o,handleClick:l}));case"image":var m=ie(u(u({},a),{absolutes:p}));return console.log(m),e.createElement(V,u({key:t,id:t},m,{handleDrag:o,handleClick:l}));case"text":var g=le(u(u({},a),{absolutes:p}));return e.createElement(ee,u({key:t,id:t},g,{handleDrag:o,handleClick:l,canvasRef:i}));default:return null}}));return e.createElement(oe,u({},b),y)},ue={opacity:{inputType:"number",label:"Opacity",scaleCenter:0,scaleFactor:100,min:0,max:100,step:1},r_x:{inputType:"number",label:"X",scaleCenter:-.5,scaleFactor:100,min:-100,max:100,step:1},r_y:{inputType:"number",label:"Y",scaleCenter:-.5,scaleFactor:100,min:-100,max:100,step:1},r_width:{inputType:"number",label:"Width",scaleCenter:0,scaleFactor:100,min:0,max:200,step:1},r_height:{inputType:"number",label:"Height",scaleCenter:0,scaleFactor:100,min:0,max:200,step:1},rotation:{inputType:"number",label:"Rotation",scaleCenter:0,scaleFactor:1,min:-180,max:180,step:1},r_strokeWidth:{inputType:"number",label:"StrokeWidth",scaleCenter:0,scaleFactor:100,min:0,max:100,step:1},r_outerSize:{inputType:"number",label:"Eye Size",scaleCenter:0,scaleFactor:200,min:0,max:100,step:1},r_outer2inner:{inputType:"number",label:"Inner Size",scaleCenter:0,scaleFactor:100,min:0,max:100,step:1},w2h:{inputType:"number",label:"W2H",scaleCenter:0,scaleFactor:100,min:40,max:160,step:1},r_innerStrokeWidth:{inputType:"number",label:"Inner StrokeWidth",scaleCenter:0,scaleFactor:100,min:0,max:100,step:1},r_outerStrokeWidth:{inputType:"number",label:"Outer StrokeWidth",scaleCenter:0,scaleFactor:100,min:0,max:100,step:1},innerRotation:{inputType:"number",label:"Inner Rotation",scaleCenter:0,scaleFactor:1,min:-180,max:180,step:1},outerRotation:{inputType:"number",label:"Outer Rotation",scaleCenter:0,scaleFactor:1,min:-180,max:180,step:1},movementFactor:{inputType:"number",label:"Movement Range",scaleCenter:0,scaleFactor:50,min:0,max:100,step:5},sensitivity:{inputType:"number",label:"Movement Sensitivity",scaleCenter:0,scaleFactor:50,min:0,max:100,step:5},strokeWidthFactor:{inputType:"number",label:"Outer StrokeWidth",scaleCenter:0,scaleFactor:200,min:0,max:40,step:1},fill:{inputType:"colorSwitch",label:"Fill",toggleId:"fillEnabled"},stroke:{inputType:"colorSwitch",label:"Stroke",toggleId:"strokeEnabled"},innerFill:{inputType:"colorSwitch",label:"InnerFill",toggleId:"innerFillEnabled"},outerFill:{inputType:"colorSwitch",label:"OuterFill",toggleId:"outerFillEnabled"},innerStroke:{inputType:"colorSwitch",label:"InnerStroke",toggleId:"innerStrokeEnabled"},outerStroke:{inputType:"colorSwitch",label:"OuterStroke",toggleId:"outerStrokeEnabled"},draggable:{inputType:"toggle",label:"Draggable"},fillEnabled:{inputType:"toggle",label:"Draggable"},strokeEnabled:{inputType:"toggle",label:"Draggable"},innerStrokeEnabled:{inputType:"toggle",label:"InnerStrokeEnabled"},outerStrokeEnabled:{inputType:"toggle",label:"OuterStrokeEnabled"},blink:{inputType:"toggle",label:"Blink"},animate:{inputType:"toggle",label:"Animate"},innerShape:{inputType:"selection",label:"InnerShape",items:["Circle","Rect"]},outerShape:{inputType:"selection",label:"OuterShape",items:["Circle","Rect"]},fontStyle:{inputType:"selection",label:"FontStyle",items:["normal","italic","bold","italic bold"]},fontFamily:{inputType:"selection",label:"FontFamily",items:["Open Sans","Roboto Condensed","Roboto Mono","Roboto","Ubuntu","Rubik","Bebas Neue","Lobster","Lobster Two","Comfortaa","Staatliches","Balsamiq Sans","Alfa Slab One","Righteous","Fredoka One","Concert One","Luckiest Guy","Poiret One","Sigmar One","Arima Madurai","Bangers","Playball","Monoton","Black Ops One","Audiowide","Gruppo","Bubblegum Sans","Chewy","Fredericka the Great","Cabin Sketch","Bungee Inline","Creepster","Love Ya Like A Sister","Wallpoet","Bungee Shade","Megrim","Unkempt","Codystar","Kranky","New Rocker","Sarina","Modak","Barrio","Tourney","Kavoon"]},align:{inputType:"selection",label:"Align",items:["left","center","right"]},verticalAlign:{inputType:"selection",label:"Vertical Align",items:["top","middle","bottom"]},src:{inputType:"text",label:"Image Url"},textContent:{inputType:"text",label:"Text Content"}},se=["fill","stroke"],de=["r_x","r_y","r_width","r_height","rotation"],he=["draggable"],me={eye:["r_x","r_y","w2h","r_outerSize","r_outer2inner","r_innerStrokeWidth","r_outerStrokeWidth","innerRotation","outerRotation","sensitivity","movementFactor"],image:s(s([],de,!0),["r_strokeWidth"],!1),rect:s(s([],de,!0),["r_cornerRadius","r_strokeWidth"],!1),text:s(s([],de,!0),["strokeWidthFactor"],!1)},ge={eye:["innerFill","innerStroke","outerFill","outerStroke"],image:se,rect:se,text:se},fe={eye:he,image:he,rect:he,text:he},pe={eye:["innerShape","outerShape"],image:[],rect:[],text:["fontStyle","fontFamily","align"]},be={eye:[],image:["src"],rect:[],text:["textContent"]},ye=function(t){var n=t.selectedID,r=t.contentObject,i=t.setContentObject,d=t.updateChangeLog,g=a(!0),f=g[0],p=g[1];if(""===n)return null;var b=n.split("_")[0],y=r[n],v=function(e){var t,a,l=e.target.id,o=e.target.value;d(l,o),i(u(u({},r),((t={})[n]=u(u({},y),((a={})[l]=o,a)),t)))},x=function(e){var t,a,l=e.target.id,o=e.target.checked;d(l,o),i(u(u({},r),((t={})[n]=u(u({},y),((a={})[l]=o,a)),t)))},k=s(s(s(s(s([],me[b],!0),ge[b],!0),fe[b],!0),pe[b],!0),be[b],!0).map((function(t,a){var s=ue[t];if(!s)return null;var g=s.inputType,f=s.label,p=y[t];switch(g){case"number":var b=s.scaleCenter,k=s.scaleFactor,S=s.min,E=s.max,w=s.step;return e.createElement(o,{id:t,key:n+"-"+t,label:f,value:Math.round((p+b)*(k||1)),onChange:function(e){var a=e.target.value;!function(e,t){var a,l;d(e,t),i(u(u({},r),((a={})[n]=u(u({},y),((l={})[e]=Number(t),l)),a)))}(t,a/(k||1)-(b||0))},min:S,max:E,step:w});case"selection":var C=s.items;return e.createElement(c,{label:f,id:t,key:n+"-"+t,value:p,items:C||[],onChange:v});case"colorSwitch":var _=s.toggleId,F=y[_||""];return e.createElement(l,{id:t,key:n+"-"+t,label:f,toggleId:_||"",value:p,toggleValue:F,onChange:v,onToggle:x});case"text":return e.createElement(m,{label:f,id:t,key:n+"-"+t,value:p,onChange:v});case"toggle":return e.createElement(h,{id:t,key:n+"-"+t,label:f,value:p,onChange:x});default:return null}}));return e.createElement(e.Fragment,null,f?e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr",width:500,padding:10,maxHeight:"100vh",overflow:"auto",gridGap:10}},k):null,e.createElement("button",{style:{position:"fixed",top:0,right:0},onClick:function(){return p(!f)}},"Toggle"))};require("konva").showWarnings=!1;var ve=function(r){var i=r.contentIDs,l=r.contentObject,o=_(),c=o.width,d=o.height,h=t(null),m=t(null),g=a(""),f=g[0],p=g[1],b=a(i),y=b[0];b[1];var v=a(l),x=v[0],k=v[1],S=a([]),E=S[0],w=S[1];x[f];return n((function(){console.log(E)}),[E.length]),e.createElement(e.Fragment,null,e.createElement(R,{width:c,height:d,canvasRef:h},e.createElement(ce,{box:{width:c,height:d},contentObject:x,contentIDs:y,canvasRef:h,handleClick:function(e){var t=e.target.attrs.id;p(t||"")},handleDrag:function(e){var t,n,r=e.target.attrs,a=r.id,i=r.x,l=r.y,o=r.box;if(p(a),m.current!=a)m.current=a;else{m.current="";var c=x[a],d=i/o.width,h=l/o.height,g=(new Date).getTime();if(g-((null===(n=E[E.length-1])||void 0===n?void 0:n.timeStamp)||0)>1e3)w(s(s([],E,!0),[{id:a,attr:"r_x",r_x:d,r_y:h,method:"drag",timeStamp:g}],!1));else{var f=s([],E,!0);f[f.length-1]={id:a,attr:"r_x",r_x:d,r_y:h,method:"drag",timeStamp:g},w(f)}k(u(u({},x),((t={})[a]=u(u({},c),{r_x:d,r_y:h}),t)))}},key:"b1",id:"b1"})),e.createElement("div",{style:{position:"absolute",left:0,top:0}},e.createElement(ye,u({},{selectedID:f,contentObject:x,setContentObject:k,updateChangeLog:function(e,t,n){var r,a;void 0===n&&(n="input");var i=(new Date).getTime(),l=E.length?E[E.length-1]:{timeStamp:0,attr:null,id:null},o=l.timeStamp,c=l.attr,u=l.id;if(i-o>1e3||e!==c||f!==u)w(s(s([],E,!0),[(r={id:f,attr:e},r[e]=t,r.method=n,r.timeStamp=i,r)],!1));else{var d=s([],E,!0);d[d.length-1]=((a={id:f,attr:e})[e]=t,a.method=n,a.timeStamp=i,a),w(d)}}}))))},xe={innerXY:{x:0,y:0},innerRotation:0,outerRotation:0,w2h:1,sensitivity:1,movementFactor:1,innerShape:"Circle",outerShape:"Circle",innerFill:"#000000",outerFill:"#ffffff",innerStroke:"#000000",outerStroke:"#ffffff",disableClip:!1,innerStrokeEnabled:!0,innerFillEnabled:!0,outerStrokeEnabled:!0,outerFillEnabled:!0,r_outerSize:.05,r_outer2inner:.5,r_x:.5,r_y:.5,r_innerStrokeWidth:.1,r_outerStrokeWidth:.1},ke={rotation:0,draggable:!1,cornerRadius:0,keepAspectRatio:!0,verticalAlign:"middle",horizontalAlign:"center",fillEnabled:!1,strokeEnabled:!1,fill:"#ffffff",stroke:"#000000",src:"",r_x:.5,r_y:.5,r_width:1,r_height:1,r_strokeWidth:.02},Se={rotation:0,fill:"#000000",stroke:"#000000",draggable:!1,cornerRadius:0,immediateXY:!0,strokeEnabled:!0,fillEnabled:!0,r_x:.5,r_y:.5,r_width:1,r_height:1,r_strokeWidth:.01},Ee={rotation:0,fill:"#000000",stroke:"#ffffff",textBoxFill:"#0000ff",textBoxStroke:"ff0000",align:"center",draggable:!1,cornerRadius:0,immediateXY:!0,strokeEnabled:!0,fillEnabled:!0,textBoxStrokeEnabled:!1,textBoxFillEnabled:!1,fontFamily:"helvetica",fontStyle:"normal",textContent:"Hello World",minLines:1,maxLines:10,strokeWidthFactor:.01,r_x:.5,r_y:.5,r_width:1,r_height:1},we=function(e){switch(e.contentID.split("_")[0]){case"eye":return u(u({},xe),e);case"image":return u(u({},ke),e);case"rect":return u(u({},Se),e);case"text":return u(u({},Ee),e);default:return null}};export{V as AniamtedImage,L as AnimatedCircle,z as AnimatedRectangle,ee as AnimatedText,ce as Biscuit,ve as BiscuitBoard,R as Board,l as ColorPickerSwitch,j as Eye,o as NumberInput,c as SelectAttribute,m as TextInput,h as ToggleSwitch,we as applyDefaults,re as buildEyeProps,ie as buildImageProps,ae as buildRectProps,le as buildTextProps,xe as eyeDefaults,g as getAbsoluteSizing,f as getInnerPosition,p as getRatio,b as getRefElement,y as getStageData,w as getTextLines,ke as imageDefaults,v as isSSR,Se as rectDefaults,Ee as textDefaults,C as useEventListener,te as useInterval,ne as useStagePositions,_ as useWindowSize};
//# sourceMappingURL=index.js.map
