import e,{useRef as t,useEffect as n,useCallback as r,useState as a,useMemo as i}from"react";!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}('html,\nbody {\n  padding: 0;\n  margin: 0;\n  font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Oxygen,\n    Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;\n}\n\na {\n  color: inherit;\n  text-decoration: none;\n}\n\n* {\n  box-sizing: border-box;\n}\n.attributeLabel {\n  width: 100%;\n  height: 38px;\n  padding: 5px;\n  display: grid;\n  grid-template-columns: auto;\n  background: black;\n  margin: auto;\n  color: white;\n  border-radius: 5px;\n}\n\n.attributeInput {\n  width: 95%;\n  margin: auto;\n  height: 50px;\n  user-select: auto;\n  border-radius: 5px;\n  /* box-shadow: 1px 1px 1px 1px #000; */\n}\n\n.inputContainer2Wide {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-gap: 5px;\n}\n\n.inputContainer3Wide {\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr auto;\n}\n\n/* SwitchInput */\n.switch {\n  position: relative;\n  display: inline-block;\n  width: 60px;\n  height: 34px;\n\n  margin: auto;\n}\n\n.switch input {\n  opacity: 0;\n  width: 0;\n  height: 0;\n}\n\n.switchspan {\n  position: absolute;\n  cursor: pointer;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: #ccc;\n  -webkit-transition: 0.4s;\n  transition: 0.4s;\n}\n\n.switchspan:before {\n  position: absolute;\n  content: "";\n  height: 26px;\n  width: 26px;\n  left: 4px;\n  bottom: 4px;\n  background-color: white;\n  -webkit-transition: 0.4s;\n  transition: 0.4s;\n}\n\n.round {\n  border-radius: 34px;\n}\n\n.round:before {\n  border-radius: 50%;\n}\n\ninput:checked + .switchspan {\n  background-color: #2196f3;\n}\n\ninput:focus + .switchspan {\n  box-shadow: 0 0 1px #2196f3;\n}\n\ninput:checked + .switchspan:before {\n  -webkit-transform: translateX(26px);\n  -ms-transform: translateX(26px);\n  transform: translateX(26px);\n}\n\n/* SliderInput */\n.sliderInput {\n  grid-column: 1/3;\n\n  -webkit-appearance: none; /* Hides the slider so that custom slider can be made */\n  width: 95%; /* Specific width is required for Firefox. */\n  background: transparent; /* Otherwise white in Chrome */\n  margin: auto;\n  /* margin-bottom: 10px; */\n  cursor: pointer;\n\n  /* background: white; */\n\n  background: rgba(0, 0, 0, 0.7);\n\n  /* background: linear-gradient(to right, blue 0%, red 100%); */\n  border-radius: 10px;\n  height: 50px;\n}\n\n.sliderInput:focus {\n  outline: none;\n}\n\n.sliderInput::-ms-track {\n  width: 95%;\n  cursor: pointer;\n  background: transparent;\n  border-color: transparent;\n  color: transparent;\n}\n\n.sliderInput::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  background: limegreen;\n  height: 60px;\n  cursor: pointer;\n  color: #ffffff;\n  width: 20px;\n  border-radius: 3px;\n  box-sizing: border-box;\n  touch-action: auto;\n  user-select: auto;\n}\n');var o=function(t){var n=t.label,r=t.value,a=t.onChange,i=t.onToggle,o=t.toggleValue,l=t.id,c=t.toggleId;return e.createElement("div",{className:"inputContainer3Wide"},e.createElement("label",{className:"attributeLabel"},e.createElement("span",{style:{margin:"auto"}},n||l)),e.createElement("label",{className:"switch"},e.createElement("input",{type:"checkbox",checked:o,onChange:i,id:c}),e.createElement("span",{className:"switchspan round"})),e.createElement("input",{id:l,disabled:!o,type:"color",value:r,onChange:a,className:"attributeInput"}))},l=function(n){var r=n.id,a=n.label,i=n.value,o=n.onChange,l=n.min,c=n.max,u=n.step;return t(i),e.createElement("div",{className:"inputContainer2Wide"},e.createElement("label",{className:"attributeLabel"},e.createElement("span",{style:{margin:"auto"}},a||r)),e.createElement("label",{className:"attributeLabel"},e.createElement("span",{style:{margin:"auto"}},i)),e.createElement("input",{id:r,className:"sliderInput",type:"range",min:l||0,max:c||100,step:u||1,value:i||0,onChange:o}))},c=function(t){var n=t.id,r=t.label,a=t.value,i=t.items,o=t.onChange;return e.createElement("div",{className:"inputContainer2Wide"},e.createElement("label",{className:"attributeLabel"},e.createElement("span",{style:{margin:"auto"}},r||n)),e.createElement("select",{id:n,value:a,onChange:o,className:"attributeInput"},i.map((function(t){return e.createElement("option",{value:t,key:t},t)}))))},u=function(){return u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},u.apply(this,arguments)};function s(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}var d,h=function(t){var n=t.round,r=void 0===n||n,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(t,["round"]),i=a.id,o=a.label,l=a.value,c=a.onChange;return e.createElement("div",{className:"inputContainer2Wide"},o?e.createElement("label",{className:"attributeLabel"},e.createElement("span",{style:{margin:"auto"}},o||i)):null,e.createElement("label",{className:"switch"},e.createElement("input",{type:"checkbox",checked:l,onChange:c,id:i}),e.createElement("span",{className:"switchspan ".concat(r?"round":"")})))},m=function(t){var n=t.id,r=t.label,a=t.value,i=t.onChange;return e.createElement("div",{className:"inputContainer2Wide"},e.createElement("label",{className:"attributeLabel"},e.createElement("span",{style:{margin:"auto"}},r)),e.createElement("input",{id:n,type:"text",value:a,onChange:i,className:"attributeInput"}))},g=function(e){var t=e.relatives,n=e.box,r=t.r_x,a=t.r_y,i=t.r_width,o=t.r_height,l=n.width,c=n.height;n.x,n.y;var u=i*l,s=o*c;return{x:r*l,y:a*c,width:u,height:s,offsetX:u/2,offsetY:s/2}},p=function(e){var t=e.focalPoint,n=e.x,r=e.y,a=e.width,i=e.height,o=e.movementFactor,l=e.outerSize,c=e.sensitivity,u=l*o,s=(t.x-n)/a*c*u,d=(t.y-r)/i*c*u;return{x:s>u?u:s<-u?-u:s,y:d>u?u:d<-u?-u:d}},f=function(e){var t=e.ratio,n=e.sum;return[t*n/(t+1),n/(t+1)]},b=function(e){return e&&"current"in e?e.current:e},x=function(e){return e&&e.current?e.current.getStage():null},y=!("undefined"!=typeof window&&(null===(d=window.document)||void 0===d?void 0:d.createElement)),v=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n].length;return t},k=function(e){for(var t=e.split(" "),n=[],r=0;r<t.length;r++){var a=t[r];a.length>0&&n.push(a)}return n},S=function(e){var t=e.parameters,n=e.size,r=e.canvasRef;if(!r||null===r.current)return null;var a=n.width,i=n.height;if(!a||!i)return null;var o=t.fontSize,l=t.maxHeight,c=t.maxWidth,u=t.text,s=t.fontFamily,d=t.fontStyle,h=r.current.getContext(),m=o+(l-o)/2,g=d?d+" "+m+"px "+s:m+"px "+s;h.font=g;var p=h.measureText(u),f=p.width;return l-o<1&&f<c?(t.fontSize=Math.floor(o-.5),t.textmetrics=p,t):f>=c?(t.maxHeight=m,S({parameters:t,size:n,canvasRef:r})):f<c?(t.fontSize=m,S({parameters:t,size:n,canvasRef:r})):void 0},w=function(e){var t=e.parameters,n=e.size,r=e.canvasRef;if(t.strokeWidthFactor,!r||null===r.current)return null;for(var a=t.textContent,i=t.maxHeight,o=n.width,l=n.height,c=k(a),s=t.minrows||1,d=t.maxrows||c.length,h=null,m=0,g=function(e){var c=function(e,t){for(var n=k(e),r=v(e)/t,a=[],i=[],o=[],l=0;l<n.length;l++){var c=n.slice(l),u=c[0],s=!1;if(c.length>=2){s=c[1],i.push(u),o=i.concat(s);var d=v(i),h=v(o);(d>r||h>r&&r-d<h-r)&&(a.push(i),i=[])}else i.push(u),a.push(i)}return a}(a,e),s=c.map((function(a){var o=a.join(" ");return S({parameters:u(u({},t),{maxHeight:i/e,text:o}),size:n,canvasRef:r})})),d=Math.min.apply(Math,s.map((function(e){if(e)return e.fontSize})));if(d>m){var g=(m=d)*s.length,p=(l-g)/2;h=s.map((function(e,t){return u(u({},e),{fontSize:d,minFontSize:d,maxFontSize:e.fontSize,width:o,y:p+t*m})}))}},p=s;p<=d;p++)g(p);return h},E=function(e){var t=e.box,n=e.content,r=e.canvasRef;if(!r||null===r.current)return null;var a=t.width,i=t.height,o=n.text;n.fontFamily;var l=n.fontStyle;return n.verticalAlign,w({parameters:u(u({},n),{fontSize:0,text:o||"",maxHeight:i||0,maxWidth:a||0,fontStyle:l}),size:t,canvasRef:r})},C=function(e){var a=e.type,i=e.listener,o=e.element,l=void 0===o?y?void 0:window:o,c=e.options,u=t();n((function(){u.current=i}),[i]);var s=r((function(e){var t;null===(t=u.current)||void 0===t||t.call(u,e)}),[]);n((function(){var e=b(l);return null==e||e.addEventListener(a,s,c),function(){return null==e?void 0:e.removeEventListener(a,s)}}),[a,l,c,s])},_=function(){var e=a({width:0,height:0,windowReady:!1}),t=e[0],r=e[1],i=function(){r({width:window.innerWidth,height:window.innerHeight,windowReady:!y})};return C({type:"resize",listener:i}),n((function(){i()}),[]),t},I=require("react-konva"),D=I.Stage,F=I.Layer,W=function(t){return e.createElement(D,{width:t.width,height:t.height},e.createElement(F,{ref:t.canvasRef},t.children))},T=require("@react-spring/konva"),R=T.animated,O=T.useSpring;require("react-konva").Rect;var z=function(t){var n=t.handleClick,r=t.draggable,a=t.x,i=t.y,o=t.width,l=t.height,c=t.fill,s=t.stroke,d=t.strokeWidth,h=t.rotation,m=t.offsetX,g=t.offsetY,p=t.fillEnabled,f=t.strokeEnabled,b=O({x:a,y:i,width:o,height:l,fill:c,stroke:s,strokeWidth:d,rotation:h,offsetX:m,offsetY:g}),x=O({x:a,y:i,immediate:t.immediateXY||!1});return e.createElement(R.Rect,u({contentID:t.contentID,id:t.contentID,box:t.box},b,x,{fillEnabled:p,strokeEnabled:f,draggable:r,onClick:n,onDragStart:t.handleDrag,onDragEnd:t.handleDrag,listening:t.listening}))},X=require("@react-spring/konva"),Y=X.animated,N=X.useSpring;require("react-konva").Circle;var L=function(t){var n=t.x,r=t.y,a=t.radius,i=t.fill,o=t.stroke,l=t.fillEnabled,c=t.strokeEnabled,s=t.strokeWidth,d=N({radius:a,fill:i,stroke:o,strokeWidth:s}),h=N({x:n,y:r,immediate:t.immediateXY||!1});return e.createElement(Y.Circle,u({},d,h,{contentID:t.contentID,id:t.contentID,box:t.box,draggable:t.draggable,fillEnabled:l,strokeEnabled:c,onClick:t.handleClick,onDragStart:t.handleDrag,onDragEnd:t.handleDrag,listening:t.listening}))},B=require("@react-spring/konva"),q=B.animated,A=B.useSpring,M=require("react-konva").Group,j=function(t){var n=t.x,r=t.y;t.width,t.height;var a=t.outerSize,i=t.outerShape,o=t.outerFill,l=t.outerStroke,c=t.outerRotation,s=t.innerSize,d=t.innerShape,h=t.innerFill,m=t.innerStroke,g=t.innerRotation,p=t.disableClip,b=t.w2h,x=t.innerXY,y=t.innerFillEnabled,v=t.innerStrokeEnabled,k=t.outerFillEnabled,S=t.outerStrokeEnabled,w=t.innerStrokeWidth,E=t.outerStrokeWidth,C=t.draggable,_=f({ratio:b||1,sum:2}),I={offsetX:0,offsetY:0,clipFunc:p?null:"Circle"===i?function(e){return e.arc(0,0,a,0,2*Math.PI)}:"Rect"===i?function(e){return e.rect(-a,-a,2*a,2*a)}:null,id:t.contentID,box:t.box},D=A({scaleX:_[0],scaleY:_[1],rotation:c||0,x:n,y:r,immediate:["x","y"]}),F={x:0,y:0,fill:o,fillEnabled:k,contentID:t.contentID,box:t.box},W={x:0,y:0,stroke:l,strokeEnabled:S,strokeWidth:E,contentID:t.contentID,box:t.box},T={x:x.x||0,y:x.y||0,fill:h,stroke:m,fillEnabled:y,strokeEnabled:v,strokeWidth:w,immediateXY:!1,dragable:!1,rotation:g||0,contentID:t.contentID,box:t.box},R="Circle"===i?e.createElement(L,u({},F,{radius:a})):"Rect"===i?e.createElement(z,u({},F,{width:2*a,height:2*a,offsetX:a,offsetY:a})):null,O="Circle"===i?e.createElement(L,u({},W,{radius:a})):"Rect"===i?e.createElement(z,u({},W,{width:2*a,height:2*a,offsetX:a,offsetY:a})):null,X="Circle"===d?e.createElement(L,u({},T,{radius:s})):"Rect"===d?e.createElement(z,u({},T,{width:2*s,height:2*s,offsetX:s,offsetY:s})):null;return e.createElement(q.Group,u({contentID:t.contentID,id:t.contentID},D,{onDragStart:t.handleDrag,onDragEnd:t.handleDrag,onClick:t.handleClick,draggable:C,listening:!0,box:t.box}),e.createElement(M,u({},I),R,X),S?O:null)},H=require("@react-spring/konva"),P=H.animated,G=H.useSpring,U=require("use-image");require("react-konva").Image;var V=function(t){var n=U(t.src),r=n[0];n[1];var a=t.x,i=t.y,o=t.width,l=t.height,c=t.rotation,s=t.offsetX,d=t.offsetY,h=G({x:a,y:i,width:o,height:l,rotation:c,offsetX:s,offsetY:d,immediate:["x","y"]}),m={fill:t.fill&&t.fillEnabled?t.fill:null,stroke:t.stroke&&t.strokeEnabled?t.stroke:null,strokeWidth:t.strokeWidth&&t.strokeEnabled?t.strokeWidth:null};return e.createElement(P.Image,u({contentID:t.contentID,id:t.contentID,box:t.box},h,m,{onClick:null==t?void 0:t.handleClick,draggable:null==t?void 0:t.draggable,canvasRef:null==t?void 0:t.canvasRef,image:r,onDragStart:t.handleDrag,onDragEnd:t.handleDrag}))},K=require("@react-spring/konva"),J=K.animated,Q=K.useSprings,Z=K.useSpring,$=require("react-konva");$.Group,$.Text;var ee=function(t){var n=t.x,r=t.y,a=t.width,o=t.height,l=t.offsetX,c=t.offsetY,s=t.rotation,d=t.strokeWidthFactor,h=t.fill,m=t.stroke,g=t.fontFamily,p=t.handleClick,f=t.handleDrag,b=t.contentID,x=t.box,y=t.canvasRef,v=t.fontStyle,k=t.draggable;t.immediateXY,t.listening;var S=t.fillEnabled,w=t.strokeEnabled;t.textBoxFillEnabled,t.textBoxStrokeEnabled;var C=t.textContent,_=t.align||"center",I=i((function(){return E({box:{width:a||0,height:o||0},content:t,canvasRef:y})||[]}),[C,a,o,g,v]),D=Q(I.length,(function(e){var t=I[e],n=t.fontSize,r=t.text,a=t.fontWeight;return{text:r,fontSize:n,strokeWidth:n*(d||0),y:t.y,width:t.width,height:t.height,fill:h,stroke:m,fontFamily:g,fontStyle:v||a,align:_,hitStrokeWidth:n,immediate:!0}}),[I,d,h,m,_])[0].map((function(t,n){return e.createElement(J.Text,u({key:"txt-"+n},t,{contentID:b,draggable:!1,fillEnabled:S,strokeEnabled:w,shadowForStrokeEnabled:!1,onClick:p}))})),F=Z({x:n,y:r,width:a,height:o,offsetX:l,offsetY:c,rotation:s,immediate:["x","y","offsetX","offsetY","width","height"]});return e.createElement(J.Group,u({},F,{contentID:b,id:b,box:x,onClick:p,onDragStart:f,onDragEnd:f,draggable:k,listening:!0}),D)};function te(e,r){var a=t(e);n((function(){a.current=e}),[e]),n((function(){if(r||0===r){var e=setInterval((function(){return a.current()}),r);return function(){return clearInterval(e)}}}),[r])}var ne=function(e){var t=e.canvasRef,n=e.delay,r=a({x:0,y:0});r[0],r[1];var i=a(0),o=i[0],l=i[1],c=a(0),u=c[0],s=c[1];return te((function(){var e=x(t);if(!e)return null;var n=e.getPointerPosition();return n?n.x===o&&n.y===u?null:(n.x!==o&&l(n.x),void(n.y!==u&&s(n.y))):null}),n||200),{x:o,y:u}},re=function(e){var t=e.r_outerSize,n=e.r_outer2inner,r=e.r_x,a=e.r_y,i=e.r_outerStrokeWidth,o=e.r_innerStrokeWidth,l=e.absolutes,c=l.width,s=l.height,d=r*c,h=a*s,m=t*(c+s)/2,g=m*(i||0),p=m-g/2,f=m*n,b=f*(o||0),x=f-b/2;return u(u(u({},e),l),{outerSize:p,innerSize:x,innerStrokeWidth:b,outerStrokeWidth:g,x:d,y:h,box:l})},ae=function(e){var t=e.r_x,n=e.r_y,r=e.r_width,a=e.r_height,i=e.r_strokeWidth,o=e.absolutes,l=o.width,c=o.height,s=t*l,d=n*c,h=r*l,m=a*c,g=i*Math.min(h,m)/2,p=h-g,f=m-g,b={x:s,y:d,width:p,height:f,offsetX:p/2,offsetY:f/2,strokeWidth:g,box:o};return u(u({},e),b)},ie=function(e){var t=e.r_x,n=e.r_y,r=e.r_width,a=e.r_height,i=e.r_strokeWidth,o=e.absolutes,l=o.width,c=o.height,s=t*l,d=n*c,h=r*l,m=a*c,g=i*Math.min(h,m)/2,p=h-g,f=m-g,b={x:s,y:d,width:p,height:f,offsetX:p/2,offsetY:f/2,strokeWidth:g,box:o};return u(u({},e),b)},oe=function(e){var t=e.r_x,n=e.r_y,r=e.r_width,a=e.r_height,i=e.absolutes,o=i.width,l=i.height,c=r*o,s=a*l,d={x:t*o,y:n*l,width:c,height:s,offsetX:c/2,offsetY:s/2,box:i};return u(u({},e),d)},le=require("react-konva").Group,ce=function(t){var n=t.contentObject,r=t.contentIDs,a=t.box,i=t.canvasRef,o=t.handleClick,l=t.handleDrag;t.id;var c=ne({canvasRef:i}),s=a.width,d=a.height,h=Math.min(s,d),m=a.x||0,g=a.y||0,f={width:h,height:h},b={x:(s-h)/2+m,y:(d-h)/2+g},x=r.map((function(t){var r=null==t?void 0:t.split("_")[0],a=n[t];switch(r){case"eye":var s=re(u(u({},a),{absolutes:f})),d=p(u(u({},s),{focalPoint:{x:c.x-b.x,y:c.y-b.y}}));return e.createElement(j,u({key:t,contentID:t},s,{innerXY:d,handleDrag:l,handleClick:o}));case"rect":var h=ae(u(u({},a),{absolutes:f}));return e.createElement(z,u({key:t,contentID:t},h,{handleDrag:l,handleClick:o}));case"image":var m=ie(u(u({},a),{absolutes:f}));return e.createElement(V,u({key:t,contentID:t},m,{handleDrag:l,handleClick:o}));case"text":var g=oe(u(u({},a),{absolutes:f}));return e.createElement(ee,u({key:t,contentID:t},g,{handleDrag:l,handleClick:o,canvasRef:i}));default:return null}}));return e.createElement(le,u({},b),x)},ue={opacity:{inputType:"number",label:"Opacity",scaleCenter:0,scaleFactor:100,min:0,max:100,step:1},r_x:{inputType:"number",label:"X",scaleCenter:-.5,scaleFactor:100,min:-100,max:100,step:1},r_y:{inputType:"number",label:"Y",scaleCenter:-.5,scaleFactor:100,min:-100,max:100,step:1},r_width:{inputType:"number",label:"Width",scaleCenter:0,scaleFactor:100,min:0,max:200,step:1},r_height:{inputType:"number",label:"Height",scaleCenter:0,scaleFactor:100,min:0,max:200,step:1},rotation:{inputType:"number",label:"Rotation",scaleCenter:0,scaleFactor:1,min:-180,max:180,step:1},r_strokeWidth:{inputType:"number",label:"StrokeWidth",scaleCenter:0,scaleFactor:100,min:0,max:100,step:1},r_outerSize:{inputType:"number",label:"Eye Size",scaleCenter:0,scaleFactor:200,min:0,max:100,step:1},r_outer2inner:{inputType:"number",label:"Inner Size",scaleCenter:0,scaleFactor:100,min:0,max:100,step:1},w2h:{inputType:"number",label:"W2H",scaleCenter:0,scaleFactor:100,min:40,max:160,step:1},r_innerStrokeWidth:{inputType:"number",label:"Inner StrokeWidth",scaleCenter:0,scaleFactor:100,min:0,max:100,step:1},r_outerStrokeWidth:{inputType:"number",label:"Outer StrokeWidth",scaleCenter:0,scaleFactor:100,min:0,max:100,step:1},innerRotation:{inputType:"number",label:"Inner Rotation",scaleCenter:0,scaleFactor:1,min:-180,max:180,step:1},outerRotation:{inputType:"number",label:"Outer Rotation",scaleCenter:0,scaleFactor:1,min:-180,max:180,step:1},movementFactor:{inputType:"number",label:"Movement Range",scaleCenter:0,scaleFactor:50,min:0,max:100,step:5},sensitivity:{inputType:"number",label:"Movement Sensitivity",scaleCenter:0,scaleFactor:50,min:0,max:100,step:5},strokeWidthFactor:{inputType:"number",label:"Outer StrokeWidth",scaleCenter:0,scaleFactor:200,min:0,max:40,step:1},fill:{inputType:"colorSwitch",label:"Fill",toggleId:"fillEnabled"},stroke:{inputType:"colorSwitch",label:"Stroke",toggleId:"strokeEnabled"},innerFill:{inputType:"colorSwitch",label:"InnerFill",toggleId:"innerFillEnabled"},outerFill:{inputType:"colorSwitch",label:"OuterFill",toggleId:"outerFillEnabled"},innerStroke:{inputType:"colorSwitch",label:"InnerStroke",toggleId:"innerStrokeEnabled"},outerStroke:{inputType:"colorSwitch",label:"OuterStroke",toggleId:"outerStrokeEnabled"},draggable:{inputType:"toggle",label:"Draggable"},fillEnabled:{inputType:"toggle",label:"Draggable"},strokeEnabled:{inputType:"toggle",label:"Draggable"},innerStrokeEnabled:{inputType:"toggle",label:"InnerStrokeEnabled"},outerStrokeEnabled:{inputType:"toggle",label:"OuterStrokeEnabled"},blink:{inputType:"toggle",label:"Blink"},animate:{inputType:"toggle",label:"Animate"},innerShape:{inputType:"selection",label:"InnerShape",items:["Circle","Rect"]},outerShape:{inputType:"selection",label:"OuterShape",items:["Circle","Rect"]},fontStyle:{inputType:"selection",label:"FontStyle",items:["normal","italic","bold","italic bold"]},fontFamily:{inputType:"selection",label:"FontFamily",items:["Open Sans","Roboto Condensed","Roboto Mono","Roboto","Ubuntu","Rubik","Bebas Neue","Lobster","Lobster Two","Comfortaa","Staatliches","Balsamiq Sans","Alfa Slab One","Righteous","Fredoka One","Concert One","Luckiest Guy","Poiret One","Sigmar One","Arima Madurai","Bangers","Playball","Monoton","Black Ops One","Audiowide","Gruppo","Bubblegum Sans","Chewy","Fredericka the Great","Cabin Sketch","Bungee Inline","Creepster","Love Ya Like A Sister","Wallpoet","Bungee Shade","Megrim","Unkempt","Codystar","Kranky","New Rocker","Sarina","Modak","Barrio","Tourney","Kavoon"]},align:{inputType:"selection",label:"Align",items:["left","center","right"]},verticalAlign:{inputType:"selection",label:"Vertical Align",items:["top","middle","bottom"]},src:{inputType:"text",label:"Image Url"},textContent:{inputType:"text",label:"Text Content"}},se=["fill","stroke"],de=["r_x","r_y","r_width","r_height","rotation"],he=["draggable"],me={eye:["r_x","r_y","w2h","r_outerSize","r_outer2inner","r_innerStrokeWidth","r_outerStrokeWidth","innerRotation","outerRotation","sensitivity","movementFactor"],image:s(s([],de,!0),["r_strokeWidth"],!1),rect:s(s([],de,!0),["r_cornerRadius","r_strokeWidth"],!1),text:s(s([],de,!0),["strokeWidthFactor"],!1)},ge={eye:["innerFill","innerStroke","outerFill","outerStroke"],image:se,rect:se,text:se},pe={eye:he,image:he,rect:he,text:he},fe={eye:["innerShape","outerShape"],image:[],rect:[],text:["fontStyle","fontFamily","align"]},be={eye:[],image:["src"],rect:[],text:["textContent"]},xe=function(t){var n=t.selectedID,r=t.contentObject,i=t.setContentObject,d=t.updateChangeLog,g=a(!0),p=g[0],f=g[1];if(""===n)return null;var b=n.split("_")[0],x=r[n],y=function(e){var t,a,o=e.target.id,l=e.target.value;d(o,l),i(u(u({},r),((t={})[n]=u(u({},x),((a={})[o]=l,a)),t)))},v=function(e){var t,a,o=e.target.id,l=e.target.checked;d(o,l),i(u(u({},r),((t={})[n]=u(u({},x),((a={})[o]=l,a)),t)))},k=s(s(s(s(s([],me[b],!0),ge[b],!0),pe[b],!0),fe[b],!0),be[b],!0).map((function(t,a){var s=ue[t];if(!s)return null;var g=s.inputType,p=s.label,f=x[t];switch(g){case"number":var b=s.scaleCenter,k=s.scaleFactor,S=s.min,w=s.max,E=s.step;return e.createElement(l,{id:t,key:n+"-"+t,label:p,value:Math.round((f+b)*(k||1)),onChange:function(e){var a=e.target.value;!function(e,t){var a,o;d(e,t),i(u(u({},r),((a={})[n]=u(u({},x),((o={})[e]=Number(t),o)),a)))}(t,a/(k||1)-(b||0))},min:S,max:w,step:E});case"selection":var C=s.items;return e.createElement(c,{label:p,id:t,key:n+"-"+t,value:f,items:C||[],onChange:y});case"colorSwitch":var _=s.toggleId,I=x[_||""];return e.createElement(o,{id:t,key:n+"-"+t,label:p,toggleId:_||"",value:f,toggleValue:I,onChange:y,onToggle:v});case"text":return e.createElement(m,{label:p,id:t,key:n+"-"+t,value:f,onChange:y});case"toggle":return e.createElement(h,{id:t,key:n+"-"+t,label:p,value:f,onChange:v});default:return null}}));return e.createElement(e.Fragment,null,p?e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr",width:500,padding:10,maxHeight:"100vh",overflow:"auto",gridGap:10}},k):null,e.createElement("button",{style:{position:"fixed",top:0,right:0},onClick:function(){return f(!p)}},"Toggle"))};require("konva").showWarnings=!1;var ye=function(r){var i=r.contentIDs,o=r.contentObject,l=_(),c=l.width,d=l.height,h=t(null),m=t(null),g=a(""),p=g[0],f=g[1],b=a(i),x=b[0];b[1];var y=a(o),v=y[0],k=y[1],S=a([]),w=S[0],E=S[1];v[p];return n((function(){}),[w.length]),e.createElement(e.Fragment,null,e.createElement(W,{width:c,height:d,canvasRef:h},e.createElement(ce,{box:{width:c,height:d},contentObject:v,contentIDs:x,canvasRef:h,handleClick:function(e){var t=e.target.attrs.contentID;f(t||"")},handleDrag:function(e){var t,n,r=e.target.attrs,a=r.contentID,i=r.x,o=r.y,l=r.box;if(f(a),m.current!=a)m.current=a;else{m.current="";var c=v[a],d=i/l.width,h=o/l.height,g=(new Date).getTime();if(g-((null===(n=w[w.length-1])||void 0===n?void 0:n.timeStamp)||0)>1e3)E(s(s([],w,!0),[{contentID:a,attr:"r_x",r_x:d,r_y:h,method:"drag",timeStamp:g}],!1));else{var p=s([],w,!0);p[p.length-1]={contentID:a,attr:"r_x",r_x:d,r_y:h,method:"drag",timeStamp:g},E(p)}k(u(u({},v),((t={})[a]=u(u({},c),{r_x:d,r_y:h}),t)))}},key:"b1",id:"b1"})),e.createElement("div",{style:{position:"absolute",left:0,top:0}},e.createElement(xe,u({},{selectedID:p,contentObject:v,setContentObject:k,updateChangeLog:function(e,t,n){var r,a;void 0===n&&(n="input");var i=(new Date).getTime(),o=w.length?w[w.length-1]:{timeStamp:0,attr:null,id:null},l=o.timeStamp,c=o.attr,u=o.id;if(i-l>1e3||e!==c||p!==u)E(s(s([],w,!0),[(r={contentID:p,attr:e},r[e]=t,r.method=n,r.timeStamp=i,r)],!1));else{var d=s([],w,!0);d[d.length-1]=((a={contentID:p,attr:e})[e]=t,a.method=n,a.timeStamp=i,a),E(d)}}}))))},ve={innerXY:{x:0,y:0},innerRotation:0,outerRotation:0,w2h:1,sensitivity:1,movementFactor:1,innerShape:"Circle",outerShape:"Circle",innerFill:"#000000",outerFill:"#ffffff",innerStroke:"#000000",outerStroke:"#ffffff",disableClip:!1,innerStrokeEnabled:!0,innerFillEnabled:!0,outerStrokeEnabled:!0,outerFillEnabled:!0,r_outerSize:.05,r_outer2inner:.5,r_x:.5,r_y:.5,r_innerStrokeWidth:.1,r_outerStrokeWidth:.1},ke={rotation:0,draggable:!1,cornerRadius:0,keepAspectRatio:!0,verticalAlign:"middle",horizontalAlign:"center",fillEnabled:!1,strokeEnabled:!1,fill:"#ffffff",stroke:"#000000",src:"",r_x:.5,r_y:.5,r_width:1,r_height:1,r_strokeWidth:.02},Se={rotation:0,fill:"#000000",stroke:"#000000",draggable:!1,cornerRadius:0,immediateXY:!0,strokeEnabled:!0,fillEnabled:!0,r_x:.5,r_y:.5,r_width:1,r_height:1,r_strokeWidth:.01},we={rotation:0,fill:"#000000",stroke:"#ffffff",textBoxFill:"#0000ff",textBoxStroke:"ff0000",align:"center",draggable:!1,cornerRadius:0,immediateXY:!0,strokeEnabled:!0,fillEnabled:!0,textBoxStrokeEnabled:!1,textBoxFillEnabled:!1,fontFamily:"helvetica",fontStyle:"normal",textContent:"Hello World",minLines:1,maxLines:10,strokeWidthFactor:.01,r_x:.5,r_y:.5,r_width:1,r_height:1},Ee=function(e){switch(e.contentID.split("_")[0]){case"eye":return u(u({},ve),e);case"image":return u(u({},ke),e);case"rect":return u(u({},Se),e);case"text":return u(u({},we),e);default:return null}};export{V as AniamtedImage,L as AnimatedCircle,z as AnimatedRectangle,ee as AnimatedText,ce as Biscuit,ye as BiscuitBoard,W as Board,o as ColorPickerSwitch,j as Eye,l as NumberInput,c as SelectAttribute,m as TextInput,h as ToggleSwitch,Ee as applyDefaults,re as buildEyeProps,ie as buildImageProps,ae as buildRectProps,oe as buildTextProps,ve as eyeDefaults,g as getAbsoluteSizing,p as getInnerPosition,f as getRatio,b as getRefElement,x as getStageData,E as getTextLines,ke as imageDefaults,y as isSSR,Se as rectDefaults,we as textDefaults,C as useEventListener,te as useInterval,ne as useStagePositions,_ as useWindowSize};
//# sourceMappingURL=index.js.map
